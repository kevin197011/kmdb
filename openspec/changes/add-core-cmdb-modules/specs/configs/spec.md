## ADDED Requirements

### Requirement: 配置快照创建
系统 SHALL 支持为资产创建配置快照，保存资产的配置信息。

#### Scenario: 成功创建配置快照
- **WHEN** 用户提供资产 ID 和配置数据
- **THEN** 系统创建配置快照记录
- **AND** 自动分配版本号（递增）
- **AND** 记录创建时间和创建用户
- **AND** 返回快照 ID 和版本号
- **AND** 创建操作记录到审计日志

#### Scenario: 为不存在的资产创建快照
- **WHEN** 用户尝试为不存在的资产 ID 创建配置快照
- **THEN** 系统返回 404 错误，提示资产不存在

#### Scenario: 创建快照时配置数据为空
- **WHEN** 用户提供空的配置数据
- **THEN** 系统返回 400 错误，提示配置数据不能为空

### Requirement: 配置快照查询
系统 SHALL 支持查询资产的配置快照列表和特定版本的快照详情。

#### Scenario: 查询资产的所有配置快照
- **WHEN** 用户请求特定资产的所有配置快照
- **THEN** 系统返回该资产的所有快照记录列表
- **AND** 按版本号倒序排列（最新在前）
- **AND** 包含版本号、创建时间、创建用户信息

#### Scenario: 查询特定版本的配置快照
- **WHEN** 用户请求特定资产和特定版本的配置快照
- **THEN** 系统返回该版本的完整配置数据
- **AND** 包含版本元数据（版本号、创建时间、创建用户）

#### Scenario: 查询不存在的资产快照
- **WHEN** 用户请求不存在资产的配置快照
- **THEN** 系统返回 404 错误

#### Scenario: 查询不存在的版本
- **WHEN** 用户请求不存在的版本号
- **THEN** 系统返回 404 错误

### Requirement: 配置快照版本管理
系统 SHALL 支持配置快照的版本管理，包括版本号自动递增和版本历史追踪。

#### Scenario: 自动递增版本号
- **WHEN** 用户为资产创建新的配置快照
- **THEN** 系统自动分配比当前最新版本大 1 的版本号
- **AND** 首次创建时版本号为 1

#### Scenario: 查询最新版本
- **WHEN** 用户请求资产的最新配置快照
- **THEN** 系统返回版本号最大的快照记录

#### Scenario: 版本历史完整性
- **WHEN** 用户查询资产的配置快照历史
- **THEN** 系统返回所有历史版本
- **AND** 版本号连续，无缺失

### Requirement: 配置快照对比
系统 SHALL 支持对比不同版本的配置快照，显示配置变更。

#### Scenario: 对比两个版本的配置
- **WHEN** 用户请求对比两个版本的配置快照
- **THEN** 系统返回配置差异
- **AND** 标识新增、修改、删除的配置项

#### Scenario: 对比当前版本与历史版本
- **WHEN** 用户请求对比最新版本与指定历史版本
- **THEN** 系统返回从历史版本到最新版本的所有变更

#### Scenario: 对比相同版本
- **WHEN** 用户请求对比相同版本号的配置
- **THEN** 系统返回无差异的提示

### Requirement: 配置快照删除
系统 SHALL 支持删除配置快照（可选功能，需谨慎处理）。

#### Scenario: 删除特定版本的配置快照
- **WHEN** 用户请求删除特定版本的配置快照
- **THEN** 系统删除该快照记录
- **AND** 删除操作记录到审计日志
- **AND** 其他版本不受影响

#### Scenario: 删除不存在的快照
- **WHEN** 用户尝试删除不存在的快照 ID
- **THEN** 系统返回 404 错误

#### Scenario: 删除快照时保留历史完整性
- **WHEN** 用户删除中间版本的快照
- **THEN** 系统确保版本号序列的完整性（可选：重新编号或保留空缺）

