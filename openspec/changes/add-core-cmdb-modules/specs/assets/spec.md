## ADDED Requirements

### Requirement: 资产创建
系统 SHALL 支持创建新的资产记录，包括服务器、虚拟机、网络设备、应用等类型。

#### Scenario: 成功创建服务器资产
- **WHEN** 用户提供有效的资产信息（类型：server，名称，状态，项目，元数据）
- **THEN** 系统创建资产记录并返回资产 ID
- **AND** 资产信息保存到数据库
- **AND** 创建操作记录到审计日志

#### Scenario: 创建资产时缺少必填字段
- **WHEN** 用户提交缺少必填字段（如名称）的资产信息
- **THEN** 系统返回 400 错误和字段验证错误信息

#### Scenario: 创建资产时名称重复
- **WHEN** 用户尝试创建与现有资产同名的资产
- **THEN** 系统返回 409 冲突错误，提示名称已存在

### Requirement: 资产查询
系统 SHALL 支持查询和列出资产记录，支持按类型、状态等条件过滤。

#### Scenario: 查询所有资产
- **WHEN** 用户请求资产列表
- **THEN** 系统返回所有资产记录的分页列表
- **AND** 包含资产的基本信息（ID、类型、名称、状态、项目、创建时间）

#### Scenario: 按类型过滤资产
- **WHEN** 用户请求特定类型（如 server）的资产列表
- **THEN** 系统仅返回该类型的资产记录

#### Scenario: 按状态过滤资产
- **WHEN** 用户请求特定状态（如 active）的资产列表
- **THEN** 系统仅返回该状态的资产记录

#### Scenario: 按项目过滤资产
- **WHEN** 用户请求特定项目的资产列表
- **THEN** 系统仅返回该项目的资产记录

#### Scenario: 查询单个资产详情
- **WHEN** 用户请求特定资产 ID 的详情
- **THEN** 系统返回该资产的完整信息，包括元数据和关系信息

#### Scenario: 查询不存在的资产
- **WHEN** 用户请求不存在的资产 ID
- **THEN** 系统返回 404 错误

### Requirement: 资产更新
系统 SHALL 支持更新现有资产的信息。

#### Scenario: 成功更新资产信息
- **WHEN** 用户提供有效的资产 ID 和更新数据
- **THEN** 系统更新资产记录
- **AND** 返回更新后的资产信息
- **AND** 更新操作记录到审计日志（包含变更前后状态）

#### Scenario: 更新不存在的资产
- **WHEN** 用户尝试更新不存在的资产 ID
- **THEN** 系统返回 404 错误

#### Scenario: 更新资产时验证失败
- **WHEN** 用户提供无效的更新数据（如无效的状态值）
- **THEN** 系统返回 400 错误和验证错误信息

### Requirement: 资产删除
系统 SHALL 支持删除资产记录。

#### Scenario: 成功删除资产
- **WHEN** 用户请求删除资产
- **THEN** 系统删除资产记录
- **AND** 删除操作记录到审计日志
- **AND** 返回成功响应

#### Scenario: 删除有关联关系的资产
- **WHEN** 用户尝试删除存在关联关系的资产
- **THEN** 系统返回 409 冲突错误，提示需要先删除关联关系
- **OR** 系统提供级联删除选项（需确认）

#### Scenario: 删除不存在的资产
- **WHEN** 用户尝试删除不存在的资产 ID
- **THEN** 系统返回 404 错误

### Requirement: 资产类型支持
系统 SHALL 支持多种资产类型，包括服务器、虚拟机、网络设备、应用等。

#### Scenario: 创建服务器类型资产
- **WHEN** 用户创建类型为 "server" 的资产
- **THEN** 系统接受并保存该资产
- **AND** 元数据字段可包含服务器特定信息（IP、操作系统、CPU、内存等）

#### Scenario: 创建虚拟机类型资产
- **WHEN** 用户创建类型为 "vm" 的资产
- **THEN** 系统接受并保存该资产
- **AND** 元数据字段可包含虚拟机特定信息（宿主机、虚拟化平台等）

#### Scenario: 创建网络设备类型资产
- **WHEN** 用户创建类型为 "network_device" 的资产
- **THEN** 系统接受并保存该资产
- **AND** 元数据字段可包含网络设备特定信息（型号、端口数、管理 IP 等）

#### Scenario: 创建应用类型资产
- **WHEN** 用户创建类型为 "application" 的资产
- **THEN** 系统接受并保存该资产
- **AND** 元数据字段可包含应用特定信息（版本、部署环境、依赖等）

### Requirement: 资产项目字段
系统 SHALL 支持为资产指定项目字段，用于资产分类和组织管理。

#### Scenario: 创建资产时指定项目
- **WHEN** 用户创建资产时提供项目字段
- **THEN** 系统保存项目信息到资产记录
- **AND** 项目字段在资产详情中显示

#### Scenario: 创建资产时项目字段为空
- **WHEN** 用户创建资产时不提供项目字段
- **THEN** 系统允许创建资产，项目字段为空值
- **AND** 资产可以后续更新项目字段

#### Scenario: 更新资产的项目字段
- **WHEN** 用户更新资产的项目字段
- **THEN** 系统更新资产的项目信息
- **AND** 更新操作记录到审计日志

#### Scenario: 按项目查询资产统计
- **WHEN** 用户请求按项目统计资产数量
- **THEN** 系统返回每个项目的资产数量统计
- **AND** 包含未分配项目的资产数量

